<!doctype html>
<html lang="zh_CN" class="mdui-theme-auto">
  <head>
    <meta charset="utf-8" />
    <title>编辑名单 - LuckyPicker</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="../static/css/mdui.css" />
    <link rel="stylesheet" href="../static/css/global.css" />
    <script src="../static/js/mdui.js"></script>
    <style>
      body {
        display: flex;
        flex-direction: column;
        height: 100vh;
        margin: 0;
        background-color: rgb(var(--mdui-color-surface));
        color: rgb(var(--mdui-color-on-surface));
      }
      .editor-container {
        flex-grow: 1;
        padding: 16px;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }
      /* Custom styling for the textarea to match MDUI theme roughly */
      #nameContent {
        flex-grow: 1;
        width: 100%;
        resize: none;
        font-family: monospace;
        font-size: 16px;
        padding: 16px;
        border: 1px solid rgb(var(--mdui-color-outline));
        border-radius: 8px;
        background-color: rgb(var(--mdui-color-surface-container));
        color: rgb(var(--mdui-color-on-surface));
        box-sizing: border-box;
        outline: none;
        transition: border-color 0.2s;
      }
      #nameContent:focus {
        border-color: rgb(var(--mdui-color-primary));
        border-width: 2px;
        padding: 15px; /* Adjust for border width change to prevent layout shift if needed, or just keep it simple */
      }
    </style>
  </head>
  <body>
    <mdui-top-app-bar style="-webkit-app-region: drag">
      <mdui-top-app-bar-title>编辑名单</mdui-top-app-bar-title>
      <div style="flex-grow: 1"></div>

      <mdui-tooltip content="导入外部TXT">
        <mdui-button-icon
          icon="file_upload"
          style="-webkit-app-region: no-drag"
          onclick="importFile()"></mdui-button-icon>
      </mdui-tooltip>

      <mdui-tooltip content="保存">
        <mdui-button-icon
          icon="save"
          style="-webkit-app-region: no-drag"
          onclick="saveFile()"></mdui-button-icon>
      </mdui-tooltip>

      <mdui-tooltip content="刷新">
        <mdui-button-icon
          icon="refresh"
          style="-webkit-app-region: no-drag"
          onclick="loadFile()"></mdui-button-icon>
      </mdui-tooltip>

      <mdui-tooltip content="关闭">
        <mdui-button-icon
          icon="close"
          style="-webkit-app-region: no-drag"
          onclick="window.close()"></mdui-button-icon>
      </mdui-tooltip>
    </mdui-top-app-bar>

    <div class="editor-container">
      <textarea
        id="nameContent"
        placeholder="在此处输入名单，一行一个名字..."></textarea>
    </div>

    <!-- Hidden file input for import -->
    <input
      type="file"
      id="fileInput"
      style="display: none"
      accept=".txt"
      onchange="handleFileImport(event)" />

    <!-- Snackbar for notifications -->
    <mdui-snackbar id="snackbar"></mdui-snackbar>

    <script src="../static/js/edit.js"></script>
  </body>
</html>
